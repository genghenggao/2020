# è‡ªå®šä¹‰ä¸»é¢˜è®¾ç½®

[TOC]

## 0. å‰è¨€

- **è‡ªå®šä¹‰ä¸»é¢˜å®‰è£…æ’ä»¶åœ¨ theme ç›®å½•ä¸‹**

```
cd .\docs\.vuepress\theme\
```

- è¿è¡Œæ˜¯åœ¨docsç›®å½•ä¸‹

  ```
  npm run docs:dev
  ```

  

## 1. Headeræ’ä»¶

### 1.1 å®‰è£…

- cd åˆ° theme ç›®å½•ä¸‹ï¼Œè¿è¡Œå‘½ä»¤å®‰è£…

```sh
npm install -D @vuepress/plugin-active-header-links
```

### 1.2 ä½¿ç”¨

```
module.exports = {
  plugins: ['@vuepress/active-header-links']
}
```

### 1.3 é…ç½®é€‰é¡¹

```
module.exports = {
  plugins: ['@vuepress/active-header-links', {
    sidebarLinkSelector: '.sidebar-link',
    headerAnchorSelector: '.header-anchor'
  }]
}
```



## 2. æœç´¢æ’ä»¶

- ä¸Šæ–‡002ä¸­åœ¨docsç›®å½•ä¸‹å®‰è£…æœç´¢æ’ä»¶åï¼Œç›´æ¥åœ¨index.jsä½¿ç”¨ï¼Œå¯¼è‡´æŠ¥é”™ğŸ˜‚ï¼ˆæä¸ªé†’ï¼‰

### 2.1 å®‰è£…

```
 npm install -D @vuepress/plugin-search
```



### 2.2 ä½¿ç”¨

- index.js

```
  ['@vuepress/search', {
    searchMaxSuggestions: 10
  }]
```

- æœ¬æ’ä»¶å°†è‡ªåŠ¨æ³¨å…¥æŒ‡å‘æœç´¢ç»„ä»¶çš„ webpack åˆ«å `@SearchBox`ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ç›´æ¥åœ¨ [layout](https://vuepress.vuejs.org/zh/miscellaneous/glossary.html#layout) ç»„ä»¶ä¸­ä½¿ç”¨å®ƒï¼š

  ```vue
  <template>
    <div class="foo-layout">
      <header>
        <SearchBox/>
      </header>
      <main>
        ...
      </main>
    </div>
  </template>
  
  <script>
  import SearchBox from '@SearchBox'
  
  export default {
    components: { SearchBox }
  }
  </script>
  ```

  



## 3. æ–‡ä»¶é…ç½®

### 3.1 theme/styles/index.styl

```
html,body{
    margin:0;
    padding:0;
}
h1,h2,h3,h4,h5,h6,ul,li,p,div,dl,dt,dd,img{
    margin:0;
    padding:0;
}
```

### 3.2 theme/styles/palette.styl

- é»˜è®¤çš„å‚æ•°

```
// é¢œè‰²
$accentColor = #3eaf7c
$textColor = #2c3e50
$borderColor = #eaecef
$codeBgColor = #282c34
$arrowBgColor = #ccc
$badgeTipColor = #42b983
$badgeWarningColor = darken(#ffe564, 35%)
$badgeErrorColor = #DA5961

// å¸ƒå±€
$navbarHeight = 3.6rem
$sidebarWidth = 20rem
$contentWidth = 740px
$homePageWidth = 960px

// å“åº”å¼å˜åŒ–ç‚¹
$MQNarrow = 959px
$MQMobile = 719px
$MQMobileNarrow = 419px
```



### 3.3 theme/layouts/GlobalLayout.vue

```vue
<!--
 * @Description: henggao_learning
 * @version: v1.0.0
 * @Author: henggao
 * @Date: 2021-01-03 16:41:31
 * @LastEditors: henggao
 * @LastEditTime: 2021-01-03 16:54:31
-->
<template>
  <div id="global-layout">
    <Header />
    <component :is="layout"/>
    <Footer />
  </div>
</template>

<script>
import YaHeader from '../components/Header'
import YaFooter from '../components/Footer'
export default {
    name:'GlobalLayout',
    components: {
        Header,
        Footer,
    },
    computed: {
        layout () {
        if (this.$page.path) {
            if (this.$frontmatter.layout) {
            // ä½ ä¹Ÿå¯ä»¥åƒé»˜è®¤çš„ globalLayout ä¸€æ ·é¦–å…ˆæ£€æµ‹ layout æ˜¯å¦å­˜åœ¨
            return this.$frontmatter.layout
            }
            return 'Layout'
        }
        return 'NotFound'
        }
    }
}
</script>
```



### 3.4 theme/components/Footer.vue

```vue
<!--
 * @Description: henggao_learning
 * @version: v1.0.0
 * @Author: henggao
 * @Date: 2021-01-03 09:54:59
 * @LastEditors: henggao
 * @LastEditTime: 2021-01-03 16:54:08
-->
<template>
    <section class="footer">
        <section class="footer_link">
            <a href="https://github.com/Heyff12/vuepress-blog-yaya">GitHub</a>
        </section>
        <section class="footer_content">
            <span>Author By henggao</span>|
            <span>Powered By <a href="https://v1.vuepress.vuejs.org/zh/guide/">VuePress</a></span>|
            <span>All rights reserved @Henggao</span>|
            <span>äº¬ICPå¤‡14017364å·-2</span>
        </section>
    </section>
</template>

<script>
export default {
    name: 'Footer'
}
</script>

<style lang="less" scoped>
.footer{
    height: 45px;
    display: flex;
    flex-direction: row;
    font-size: 12px;
    color: #829ebb;
    padding:0 20px;
    width:1200px;
    margin:0 auto;
    justify-content: space-between;
    .footer_content{
        span{
            padding:0 5px;
        }
    }
}
</style>
```

### 3.5 3.3 config.js

```js
/*
 * @Description: henggao_learning
 * @version: v1.0.0
 * @Author: henggao
 * @Date: 2021-01-02 10:57:47
 * @LastEditors: henggao
 * @LastEditTime: 2021-01-03 16:40:38
 */
module.exports = {

    // ä½¿ç”¨æ’ä»¶
    plugins: [
        '@vuepress/back-to-top',
        ['@vuepress/search', {
            searchMaxSuggestions: 10
        }]
    ],
    title: 'Henggao Blog', // ç«™ç‚¹åç§°
    description: 'Just playing around', // æè¿°
    // lange: 'zh-CN', // è¯­è¨€
    // theme: 'vuepress-theme-henggao', //ä½¿ç”¨åˆ«äººçš„ä¸»é¢˜ä¸»é¢˜
    theme: require.resolve('./theme/'), // ä½¿ç”¨è‡ªå®šä¹‰ä¸»é¢˜
    markdown: { // markdown é…ç½®
        lineNumbers: true
    },
    // æ³¨å…¥åˆ°å½“å‰é¡µé¢çš„ HTML <head> ä¸­çš„æ ‡ç­¾
    head: [
        ['link',
            { rel: 'icon', href: '/logo.jpg' }
            //æµè§ˆå™¨çš„æ ‡ç­¾æ çš„ç½‘é¡µå›¾æ ‡ï¼Œç¬¬ä¸€ä¸ª'/'ä¼šéå†publicæ–‡ä»¶å¤¹çš„æ–‡ä»¶
        ],
    ],
    //é…ç½®å¤šè¯­è¨€ç­›é€‰é¡¹
    locales: {
        '/': {
            lang: 'zh-CN', // å°†ä¼šè¢«è®¾ç½®ä¸º <html> çš„ lang å±æ€§
            title: "",
            description: 'ITåšå®¢ï¼Œè®°å½•å­¦ä¹ ç‚¹æ»´ã€ç”Ÿæ´»ç‚¹æ»´'
        },
        '/en/': {
            lang: 'en-US',
            title: "",
            description: "blog,IT development,front-end,IT,web desing"
        }
    },
    //ä¸‹é¢æ¶‰åŠåˆ°çš„mdæ–‡ä»¶å’Œå…¶ä»–æ–‡ä»¶çš„è·¯å¾„ä¸‹ä¸€æ­¥å†è¯¦ç»†è§£é‡Š
    themeConfig: {
        dateFormat: 'YYYY-MM-DD',
        logo: '/logo.jpg',  //ç½‘é¡µé¡¶ç«¯å¯¼èˆªæ å·¦ä¸Šè§’çš„å›¾æ ‡
        // lastUpdated: 'Last Updated', // string | boolean
        // // é»˜è®¤å€¼æ˜¯ true ã€‚è®¾ç½®ä¸º false æ¥ç¦ç”¨æ‰€æœ‰é¡µé¢çš„ ä¸‹ä¸€ç¯‡ é“¾æ¥
        // nextLinks: false,
        // // é»˜è®¤å€¼æ˜¯ true ã€‚è®¾ç½®ä¸º false æ¥ç¦ç”¨æ‰€æœ‰é¡µé¢çš„ ä¸Šä¸€ç¯‡ é“¾æ¥
        // prevLinks: fals,
        // // é¡µé¢æ»šåŠ¨
        // smoothScroll: true,
        //é¡¶éƒ¨å¯¼èˆªæ 
        locales: {
            '/': {
                selectText: 'é€‰æ‹©è¯­è¨€',
                label: 'ç®€ä½“ä¸­æ–‡',
                editLinkText: 'åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ',
                serviceWorker: {
                    updatePopup: {
                        message: "å‘ç°æ–°å†…å®¹å¯ç”¨.",
                        buttonText: "åˆ·æ–°"
                    }
                },
                algolia: {},
                nav: [
                    { text: 'å­¦ä¹ ', link: '/study/' },
                    { text: 'å…³äº', link: '/about/' },
                ]
            },
            '/en/': {
                selectText: 'Languages',
                label: 'English',
                ariaLabel: 'Languages',
                editLinkText: 'Edit this page on GitHub',
                serviceWorker: {
                    updatePopup: {
                        message: "New content is available.",
                        buttonText: "Refresh"
                    }
                },
                algolia: {},
                nav: [
                    { text: 'About', link: '/en/about/' },
                ]
            }
        },

        //ä¾§è¾¹å¯¼èˆªæ ï¼šä¼šæ ¹æ®å½“å‰çš„æ–‡ä»¶è·¯å¾„æ˜¯å¦åŒ¹é…ä¾§è¾¹æ æ•°æ®ï¼Œè‡ªåŠ¨æ˜¾ç¤º/éšè—
        sidebar: {
            '/pages/folder1/': [
                {
                    title: 'æµ‹è¯•èœå•1',   // ä¸€çº§èœå•åç§°
                    collapsable: false, // falseä¸ºé»˜è®¤å±•å¼€èœå•, é»˜è®¤å€¼trueæ˜¯æŠ˜å ,
                    sidebarDepth: 1,    //  è®¾ç½®ä¾§è¾¹å¯¼èˆªè‡ªåŠ¨æå–markdownæ–‡ä»¶æ ‡é¢˜çš„å±‚çº§ï¼Œé»˜è®¤1ä¸ºh2å±‚çº§
                    children: [
                        ['test1.md', 'å­èœå•1'],  //èœå•åç§°ä¸º'å­èœå•1'ï¼Œè·³è½¬è‡³/pages/folder1/test1.md
                        ['test3.md', 'å­èœå•2']
                    ]
                },
                {
                    title: 'æµ‹è¯•èœå•2',
                    collapsable: false,
                    children: [
                        ['test2.md', 'å­èœå•1']
                    ]
                }
            ],

            //...å¯æ·»åŠ å¤šä¸ªä¸åŒçš„ä¾§è¾¹æ ï¼Œä¸åŒé¡µé¢ä¼šæ ¹æ®è·¯å¾„æ˜¾ç¤ºä¸åŒçš„ä¾§è¾¹æ 
        }
    }

}
```



## 4. é…ç½®404é¡µé¢

```vue
<!--
 * @Description: henggao_learning
 * @version: v1.0.0
 * @Author: henggao
 * @Date: 2021-01-03 09:39:30
 * @LastEditors: henggao
 * @LastEditTime: 2021-01-03 16:41:06
-->
<template>
  <section class="error">
    <h1 class="error-code">404</h1>
    <p class="error-description">Page not found</p>
    <router-link :to="$localePath" class="error-home">home</router-link>
  </section>
</template>

<script>
export default {
  name: 'NotFound'
}
</script>

<style lang="less" scoped>
.error{
    display: flex;
    flex-direction: column;
    align-items: center;
    .error-code{
        font-size: 12vw;
        color: #d6dadc;
    }
    .error-description {
        border-left: 8px solid #d6dadc;
        padding-left: 20px;
        font-size: 2rem;
        color: #2c3e50;
        font-weight: 400;
        opacity: 0.5;
        transition: color 0.5s ease-in-out;
    }
    .error-home {
        display: inline-block;
        margin: 2rem 0 4rem;
        font-size: 2rem;
        color: #3eaf7c;
        transition: color 0.5s ease-in-out;
    }
}
</style>
```



## docsç›®å½•ä¸‹æ’ä»¶å®‰è£…

### 1. é…ç½®Less

```
npm install -D less less-loader
```



### 2. è¿”å›é¡¶éƒ¨

```
npm install -D @vuepress/plugin-back-to-top
```

ä¿®æ”¹ config.js

```text
plugins: ['@vuepress/back-to-top']
```



- [ref](https://www.yaya12.com/study/custom-vuepress-theme.html)