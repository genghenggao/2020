# åœ°ç†æ•°æ®æ¨¡å—

[TOC]

## 1. å‰ç«¯

### 1.1 MonGeoStoreä¸»é¡µ

- MonGeoStore.vue

  ```vue
                <div
                  v-else-if="
                    this.$store.state.temp_database == 'åœ°ç†æ•°æ®ç®¡ç†å­ç³»ç»Ÿ' &&
                    this.$store.state.title_message == 'åœ°ç†æ•°æ®'
                  "
                >
                  <GeographicalInfo />
                </div>
  ```

### 1.2 è·¯ç”±è®¾ç½®

- router/index.js

```js
      // åœ°ç†æ•°æ®
      {
        path: "geographicalmap",
        name: "GeographicalMap",
        component: () =>
          import(/* webpackChunkName: "about" */ "@/components/geographical/GeographicalMap.vue")
      },

```



### 1.3 å¯¼èˆª

- GeographicalInfo.vue

  ```vue
  <!--
   * @Description: henggao_learning
   * @version: v1.0.0
   * @Author: henggao
   * @Date: 2020-12-16 14:34:23
   * @LastEditors: henggao
   * @LastEditTime: 2021-01-05 19:27:49
  -->
  <template>
    <!-- ä¸»ç•Œé¢-->
    <div class="maincontent" style="overflow: hidden">
      <!-- å­å¯¼èˆª -->
      <el-container>
        <el-header class="maincontent_header">
          <el-menu
            router
            :default-active="activeIndex"
            class="el-menu-demo"
            mode="horizontal"
            @select="handleSelect"
          >
            <el-menu-item index="/mongeostore/seismichome"
              ><i class="el-icon-s-home"></i>
              é¦–é¡µ
            </el-menu-item>
            <el-menu-item index="/mongeostore/seismicdatainfo"
              ><i class="el-icon-document"></i>
              æ•°æ®ä¿¡æ¯
            </el-menu-item>
            <el-menu-item index="/mongeostore/seismicmetadata"
              ><i class="el-icon-s-data"></i>å…ƒæ•°æ®
            </el-menu-item>
            <el-menu-item index="/mongeostore/seismicprofile"
              ><i class="el-icon-document"></i>åœ°éœ‡å‰–é¢</el-menu-item
            >
            <el-menu-item index="/mongeostore/seismicanalysis"
              ><i class="el-icon-document"></i>è§£ææ•°æ®</el-menu-item
            >
            <el-menu-item index="/mongeostore/seismicupload"
              ><i class="el-icon-upload"></i>ä¸Šä¼ æ•°æ®</el-menu-item
            >
          </el-menu>
        </el-header>
        <el-main>
          <router-view></router-view>
        </el-main>
      </el-container>
    </div>
  </template>
  
  <script>
  import SeismicHome from "@/components/seismic/SeismicHome.vue";
  export default {
    name: "SeismicInfo",
    components: {
      SeismicHome,
    },
    data() {
      return {
        activeIndex: "",
      };
    },
    mounted() {
      //  _this.activeIndex=window.location.href.split('/')[4];
      //  console.log(window.location.href.split('/'));
      this.activeIndex = "/mongeostore/seismichome";
    },
    methods: {
      handleSelect(key, keyPath) {
        console.log(key, keyPath);
      },
    },
  };
  </script>
  
  <style lang="scss" scoped>
  // .maincontent {
  //   // height: 821px;
  //   // height: 850px;
  // }
  /* å¯¼èˆªå­æ ‡é¢˜ */
  .maincontent_header {
    /* å›ºå®šé«˜åº¦ */
    height: 46px !important;
    /* æ¶ˆé™¤è¾¹è· */
    padding: 0;
    // å›ºå®šå†…å®¹
  }
  /* maincontentå­å¯¼èˆª */
  .maincontent div#nav-tab {
    height: 46px;
    /* width: 100%; */
    /* background-color: rgba(21, 132, 197, 0.5); */
    background-color: #870000;
    /* position: static; */
  }
  /* maincontentå­å¯¼èˆª å­—ä½“ */
  .maincontent div#nav-tab a {
    color: #ac8585;
  }
  .maincontent .el-menu-item i {
    color: #ac8585;
    font-size: 25px;
    padding-bottom: 6px;
  }
  // div#nav-tabContent {
  //   // height: 775px;
  //   // height: 780px;
  // }
  .el-menu-demo {
    height: 46px;
    background-color: #870000;
  }
  .el-menu-demo .el-menu-item {
    font-size: 20px;
    color: #b47777;
  }
  .el-menu--horizontal > .el-menu-item {
    float: left;
    height: 46px;
    line-height: 46px;
    margin: 0;
  }
  ul.el-menu-demo.el-menu--horizontal.el-menu {
    border-color: #810000;
  }
  </style>
  ```

  

- GeographicalMap.vue

  ```vue
  <!--
   * @Description: henggao_learning
   * @version: v1.0.0
   * @Author: henggao
   * @Date: 2021-01-03 22:56:56
   * @LastEditors: henggao
   * @LastEditTime: 2021-01-04 22:24:34
  -->
  <template>
    <!-- <div id="cesiumContainer"></div>
     -->
    <div>
      <div id="cesiumContainer" class="fullSize"></div>
      <div id="loadingOverlay"><h1>Loading...</h1></div>
      <div id="toolbar">
        <div id="zoomButtons"></div>
      </div>
    </div>
  </template>
  
  <script>
  import * as Cesium from "cesium/Cesium";
  import * as widgets from "cesium/Widgets/widgets.css";
  
  export default {
    name: "GeographicalMap",
    mounted() {
      var cesiumAsset =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxZDE0MWI4OS1jYjYxLTRmMDEtYWI5Yy1hZjBiNDAwZjc2NzEiLCJpZCI6MTgzMDEsImlhdCI6MTYwOTMyNjMxNH0.5H4EA7TyeUBhRmOI6IoRFXjyLtEJAjFZKJORBhGK2uc";
      var tiandituTk = "	9c117468801c8405aaddff93da98c1e6";
      // var tiandituTk = "	ebf64362215c081f8317203220f133eb";
      // æœåŠ¡åŸŸå
      var tdtUrl = "https://t{s}.tianditu.gov.cn/";
      var subdomains = ["0", "1", "2", "3", "4", "5", "6", "7"];
      Cesium.Ion.defaultAccessToken = cesiumAsset; //è®¾ç½®ä½ çš„seisum assetï¼Œä¸æ·»åŠ åˆ™ä½¿ç”¨é»˜è®¤ï¼Œä¸‹æ–¹ä¼šæœ‰æç¤º
      var viewer = new Cesium.Viewer("cesiumContainer", {
        animation: false, //æ˜¯å¦æ˜¾ç¤ºåŠ¨ç”»æ§ä»¶
        baseLayerPicker: false, //æ˜¯å¦æ˜¾ç¤ºå›¾å±‚é€‰æ‹©æ§ä»¶
        geocoder: true, //æ˜¯å¦æ˜¾ç¤ºåœ°åæŸ¥æ‰¾æ§ä»¶
        timeline: false, //æ˜¯å¦æ˜¾ç¤ºæ—¶é—´çº¿æ§ä»¶
        sceneModePicker: true, //æ˜¯å¦æ˜¾ç¤ºæŠ•å½±æ–¹å¼æ§ä»¶
        navigationHelpButton: false, //æ˜¯å¦æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯æ§ä»¶
        infoBox: true, //æ˜¯å¦æ˜¾ç¤ºç‚¹å‡»è¦ç´ ä¹‹åæ˜¾ç¤ºçš„ä¿¡æ¯
      });
      //åŠ è½½å½±åƒåº•å›¾
      var layer = new Cesium.WebMapTileServiceImageryProvider({
        url:
          "http://t0.tianditu.gov.cn/img_w/wmts?tk=9c117468801c8405aaddff93da98c1e6",
        layer: "img",
        style: "default",
        tileMatrixSetID: "w",
        format: "tiles",
        maximumLevel: 18,
      });
      viewer.imageryLayers.addImageryProvider(layer);
      viewer._cesiumWidget._creditContainer.style.display = "none"; // éšè—cesium ion
      //åŠ è½½å½±åƒæ³¨è®°
      var layer1 = new Cesium.WebMapTileServiceImageryProvider({
        url:
          "http://t0.tianditu.gov.cn/cia_w/wmts?tk=9c117468801c8405aaddff93da98c1e6",
        layer: "cia",
        style: "default",
        tileMatrixSetID: "w",
        format: "tiles",
        maximumLevel: 18,
      });
      viewer.imageryLayers.addImageryProvider(layer1);
      // å°†ä¸‰ç»´çƒå®šä½åˆ°ä¸­å›½
      viewer.camera.flyTo({
        destination: Cesium.Cartesian3.fromDegrees(103.84, 31.15, 17850000),
        orientation: {
          heading: Cesium.Math.toRadians(348.4202942851978),
          pitch: Cesium.Math.toRadians(-89.74026687972041),
          roll: Cesium.Math.toRadians(0),
        },
        complete: function callback() {
          // å®šä½å®Œæˆä¹‹åçš„å›è°ƒå‡½æ•°
        },
      });
    },
  };
  </script>
  
  <style scoped>
  @import url(https://sandcastle.cesium.com/templates/bucket.css);
  </style>
  
  
  ```

  

### 1.4 åœ°ç†æ•°æ®é¦–é¡µ

- å½“æˆ‘ä½¿ç”¨cesiumæ—¶ï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¿™ä¸ªå¿…é¡»è¦å…¨å±æ˜¾ç¤ºã€‚è¿™å¯¼è‡´ElementUIå¸ƒå±€å‘ç”Ÿé”™è¯¯ï¼Œå¯èƒ½æ˜¯é™æ€èµ„æºåŠ è½½é—®é¢˜ã€‚`<router-views>`åŠ è½½é—®é¢˜ï¼Ÿâ“**è¿™ä¸ªé—®é¢˜è¿˜æ²¡è§£å†³~**

  - è¿™ä¸ªé—®é¢˜è§£å†³äº†ï¼Œå°†Vue.config.jsä¸­è·¯å¾„ä¿®æ”¹ï¼Œè¿™ä¸ªé—®é¢˜åœ¨18-0ä¸­è§£å†³ã€‚

- çªç„¶ï¼Œæˆ‘æƒ³åˆ°äº†è¿˜æœ‰ä¸ªvue Cesiumï¼Œå°±å°è¯•ä¸€ä¸‹ï¼Œå“¦è±ï¼è¿™ä¸ªé—®é¢˜æ¶ˆå¤±äº†ğŸ˜

  ```vue
  <!--
   * @Description: henggao_learning
   * @version: v1.0.0
   * @Author: henggao
   * @Date: 2021-01-03 22:56:56
   * @LastEditors: henggao
   * @LastEditTime: 2021-01-05 22:19:19
  -->
  <template>
    <div class="viewer">
      <vc-viewer>
        <vc-layer-imagery></vc-layer-imagery>
      </vc-viewer>
    </div>
  </template>
  
  <script>
  import Vue from "vue";
  import VueCesium from "vue-cesium";
  // VueCesium é»˜è®¤ä½¿ç”¨ `https://unpkg.com/cesium/Build/Cesium/Cesium.js`
  Vue.use(VueCesium, {
    // cesiumPath æ˜¯æŒ‡å¼•ç”¨çš„Cesium.jsè·¯å¾„ï¼Œå¦‚
    // é¡¹ç›®æœ¬åœ°çš„Cesium BuildåŒ…ï¼Œvueé¡¹ç›®éœ€è¦å°†Cesium BuildåŒ…æ”¾staticç›®å½•ï¼š
    // cesiumPath: /static/Cesium/Cesium.js
    // ä¸ªäººåœ¨çº¿Cesium BuildåŒ…ï¼š
    // cesiumPath: 'https://zouyaoji.top/vue-cesium/statics/Cesium/Cesium.js'
    // ä¸ªäººåœ¨çº¿SuperMap Cesium BuildåŒ…ï¼ˆåœ¨å®˜æ–¹åŸºç¡€ä¸ŠäºŒæ¬¡å¼€å‘å‡ºæ¥çš„ï¼‰ï¼š
    // cesiumPath: 'https://zouyaoji.top/vue-cesium/statics/SuperMapCesium/Cesium.js'
    // å®˜æ–¹åœ¨çº¿Cesium BuildåŒ…ï¼Œæœ‰CDNåŠ é€Ÿï¼Œæ¨èç”¨è¿™ä¸ªï¼š
    cesiumPath: "https://unpkg.com/cesium/Build/Cesium/Cesium.js",
    // æŒ‡å®šCesium.Ion.defaultAccessTokenï¼Œä½¿ç”¨Cesium ionçš„æ•°æ®æºéœ€è¦åˆ°https://cesium.com/ion/ç”³è¯·ä¸€ä¸ªè´¦æˆ·ï¼Œè·å–Access Tokenã€‚ä¸æŒ‡å®šçš„è¯å¯èƒ½å¯¼è‡´ Cesium åœ¨çº¿å½±åƒåŠ è½½ä¸äº†
    accessToken:
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxZDE0MWI4OS1jYjYxLTRmMDEtYWI5Yy1hZjBiNDAwZjc2NzEiLCJpZCI6MTgzMDEsImlhdCI6MTYwOTMyNjMxNH0.5H4EA7TyeUBhRmOI6IoRFXjyLtEJAjFZKJORBhGK2uc",
  });
  export default {};
  </script>
  
  <style>
  .viewer {
    width: 100%;
    height: 811px;
  }
  </style>
  ```

- æµè§ˆå™¨é¢„è§ˆä¸€ä¸‹

  ![](IMG/å¾®ä¿¡æˆªå›¾_20210105222328.png)



## 2. åç«¯



